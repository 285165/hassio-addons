#!/usr/bin/with-contenv bashio

##############
# Data usage #
##############

bashio::log.info "Setting permissions"
chown -R abc:abc /data

#######################
# VIEWPORT CORRECTION #
#######################

 # correct viewport bug
    sed -i 's|"lt-md":"(max-width:  959px)"|"lt-md":"(max-width:  100px)" |g' main-es2015.2cbbffb254a0e9c77985.js || true
    sed -i 's|"lt-md":"(max-width:  959px)"|"lt-md":"(max-width:  100px)" |g' main-es5.2cbbffb254a0e9c77985.js || true
    
######################
# API URL CORRECTION #
######################

# allow true url for ingress 
    grep -rl '/api/' /app | xargs sed -i 's|/api/|api/|g' || true
    grep -rl 'api/' /app | xargs sed -i 's|api/|./api/|g' || true
